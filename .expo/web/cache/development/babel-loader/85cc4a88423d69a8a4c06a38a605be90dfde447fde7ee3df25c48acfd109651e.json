{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nvar BASE_URL = 'https://s5-4242.nuage-peda.fr/gsbvttMobile/API';\nexport var login = function () {\n  var _ref = _asyncToGenerator(function* (email, password) {\n    var response = yield fetch(`${BASE_URL}/ApiAuth.php`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email: email,\n        password: password\n      })\n    });\n    if (!response.ok) {\n      throw new Error('Erreur de connexion');\n    }\n    return response.json();\n  });\n  return function login(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var fetchVisites = function () {\n  var _ref2 = _asyncToGenerator(function* (token) {\n    var response = yield fetch(`${BASE_URL}/ApiVisite.php`, {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    if (!response.ok) {\n      throw new Error('Erreur lors de la récupération des visites');\n    }\n    return response.json();\n  });\n  return function fetchVisites(_x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var createVisite = function () {\n  var _ref3 = _asyncToGenerator(function* (token, visiteData) {\n    var response = yield fetch(`${BASE_URL}/ApiVisite.php`, {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(visiteData)\n    });\n    if (!response.ok) {\n      throw new Error('Erreur lors de la création de la visite');\n    }\n    return response.json();\n  });\n  return function createVisite(_x4, _x5) {\n    return _ref3.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["BASE_URL","login","_ref","_asyncToGenerator","email","password","response","fetch","method","headers","body","JSON","stringify","ok","Error","json","_x","_x2","apply","arguments","fetchVisites","_ref2","token","_x3","createVisite","_ref3","visiteData","_x4","_x5"],"sources":["D:/BTS/AP/GSBVTTMobile/src/services/api.ts"],"sourcesContent":["const BASE_URL = 'https://s5-4242.nuage-peda.fr/gsbvttMobile/API';\r\n\r\ninterface LoginResponse {\r\n  status: string;\r\n  message: string;\r\n  user: {\r\n    id: number;\r\n    nom: string;\r\n    prenom: string;\r\n    email: string;\r\n  };\r\n  token: string;\r\n}\r\n\r\nexport const login = async (email: string, password: string): Promise<LoginResponse> => {\r\n  const response = await fetch(`${BASE_URL}/ApiAuth.php`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ email, password }),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error('Erreur de connexion');\r\n  }\r\n\r\n  return response.json();\r\n};\r\n\r\nexport const fetchVisites = async (token: string) => {\r\n  const response = await fetch(`${BASE_URL}/ApiVisite.php`, {\r\n    headers: {\r\n      'Authorization': `Bearer ${token}`,\r\n    },\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error('Erreur lors de la récupération des visites');\r\n  }\r\n\r\n  return response.json();\r\n};\r\n\r\nexport const createVisite = async (token: string, visiteData: any) => {\r\n  const response = await fetch(`${BASE_URL}/ApiVisite.php`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Authorization': `Bearer ${token}`,\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(visiteData),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error('Erreur lors de la création de la visite');\r\n  }\r\n\r\n  return response.json();\r\n};\r\n"],"mappings":";AAAA,IAAMA,QAAQ,GAAG,gDAAgD;AAcjE,OAAO,IAAMC,KAAK;EAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,WAAOC,KAAa,EAAEC,QAAgB,EAA6B;IACtF,IAAMC,QAAQ,SAASC,KAAK,CAAC,GAAGP,QAAQ,cAAc,EAAE;MACtDQ,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,cAAc,EAAE;MAClB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAER,KAAK,EAALA,KAAK;QAAEC,QAAQ,EAARA;MAAS,CAAC;IAC1C,CAAC,CAAC;IAEF,IAAI,CAACC,QAAQ,CAACO,EAAE,EAAE;MAChB,MAAM,IAAIC,KAAK,CAAC,qBAAqB,CAAC;IACxC;IAEA,OAAOR,QAAQ,CAACS,IAAI,CAAC,CAAC;EACxB,CAAC;EAAA,gBAdYd,KAAKA,CAAAe,EAAA,EAAAC,GAAA;IAAA,OAAAf,IAAA,CAAAgB,KAAA,OAAAC,SAAA;EAAA;AAAA,GAcjB;AAED,OAAO,IAAMC,YAAY;EAAA,IAAAC,KAAA,GAAAlB,iBAAA,CAAG,WAAOmB,KAAa,EAAK;IACnD,IAAMhB,QAAQ,SAASC,KAAK,CAAC,GAAGP,QAAQ,gBAAgB,EAAE;MACxDS,OAAO,EAAE;QACP,eAAe,EAAE,UAAUa,KAAK;MAClC;IACF,CAAC,CAAC;IAEF,IAAI,CAAChB,QAAQ,CAACO,EAAE,EAAE;MAChB,MAAM,IAAIC,KAAK,CAAC,4CAA4C,CAAC;IAC/D;IAEA,OAAOR,QAAQ,CAACS,IAAI,CAAC,CAAC;EACxB,CAAC;EAAA,gBAZYK,YAAYA,CAAAG,GAAA;IAAA,OAAAF,KAAA,CAAAH,KAAA,OAAAC,SAAA;EAAA;AAAA,GAYxB;AAED,OAAO,IAAMK,YAAY;EAAA,IAAAC,KAAA,GAAAtB,iBAAA,CAAG,WAAOmB,KAAa,EAAEI,UAAe,EAAK;IACpE,IAAMpB,QAAQ,SAASC,KAAK,CAAC,GAAGP,QAAQ,gBAAgB,EAAE;MACxDQ,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,eAAe,EAAE,UAAUa,KAAK,EAAE;QAClC,cAAc,EAAE;MAClB,CAAC;MACDZ,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACc,UAAU;IACjC,CAAC,CAAC;IAEF,IAAI,CAACpB,QAAQ,CAACO,EAAE,EAAE;MAChB,MAAM,IAAIC,KAAK,CAAC,yCAAyC,CAAC;IAC5D;IAEA,OAAOR,QAAQ,CAACS,IAAI,CAAC,CAAC;EACxB,CAAC;EAAA,gBAfYS,YAAYA,CAAAG,GAAA,EAAAC,GAAA;IAAA,OAAAH,KAAA,CAAAP,KAAA,OAAAC,SAAA;EAAA;AAAA,GAexB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}